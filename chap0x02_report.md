# 实验二 系统安全、风险评估理论与应用

## 实验环境

- 操作系统版本
    - HarmonyOS 2.0.0.168(C00E160R5P6patch01) GPU Turbo
- 硬件设备型号
    - LIO-AL00
- 是否默认设置
    - 是

## 实验内容

### 一、操作系统的访问控制设计实例研究

- 以 HarmonyOS 系统为研究对象
    - 当系统处于锁屏状态下接收到新短信时，不解锁情况下
        - 系统是否允许查看短信内容？**否**
        - 系统是否允许回复短信？**否**
        - 安卓上的 App : 以 微信电话本 为例，在接管了系统短信功能和权限之后，是否会有一些不同的功能设定？**否**
    - 当系统处于锁屏状态下，使用系统内置（例如 iOS 的 Siri ）或第三方的语音助手可以完成以下哪些操作？
        - 访问通讯录 **否**
        - 拨打电话 **是**
        - 访问相册 **否**
        - 查看短信收件箱 **否**
    - 如果你的手机支持指纹识别解锁手机，请实验并分析指纹识别相比较于简单密码、复杂密码、图形解锁、人脸识别解锁、声纹解锁等解锁方式的安全性、便利性差异。
        - 安全性
            - 指纹识别：每个人的指纹是独一无二的，但指纹识别的应用仍存在一些问题，鉴于指纹存在相似性， 算法的精度不高容易导致识别错误，而且在接触东西时遗留的指纹信息容易被他人引用。
            - 简单密码：较为安全。一般情况下只要保管好自己的密码不泄露，别人很难解锁手机。
            - 复杂密码：安全性更高一些。
            - 图形解锁：同简单密码，容易被偷窥而破解。
            - 人脸识别解锁：安卓上的人脸解锁安全性较差，有时照片或者别人拿着你的手机放在面前就可以完成解锁。人脸识别比指纹识别更便捷，但安全性比较差。
            - 声纹解锁：对外界环境因素的影响很敏感，容易影响声纹解锁的准率。
        - 便利性
            - 指纹识别：目前智能手机上应用最广泛的解锁方式，方便迅速。但当手指潮湿或有污物时，指纹解锁无法生效。
            - 简单密码：每次解锁时都要输入密码，相比于指纹解锁和人脸解锁，效率比较低。
            - 复杂密码：需要手动输入复杂密码，便利性更差。
            - 图形解锁：同简单密码。效率略低于指纹解锁。
            - 人脸识别解锁：相比于指纹解锁更方便快捷，用户在看手机时只需要点亮屏幕便可以自动解锁。
            - 声纹解锁：对外界声音环境的要求较高，影响了其便利性。


### 二、思考题

- 以上设计实现方式属于我们课堂上讲过的哪种强制访问控制模型？Lattice/BLP？Biba？
  - BLP模型；即上读下写，主体不可读安全级别高于它的数据，主体不可写安全级别低于它的数据。


- 系统或第三方应用程序是否提供了上述功能的访问控制规则修改？如果修改默认配置，是提高了安全性还是降低了安全性？

  - 是；如果设置不当，安全性会降低。


### 三、课后题
1. 生物特征身份认证方式有哪些？优缺点分析？应用场景举例。

   | 认证方式 |                             优点                             |                             缺点                             |                           应用场景                           |
   | :------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
   | 指纹识别 | 指纹识别技术是目前较为成熟且价格便宜的生物特征识别技术；每个人的指纹识别都是唯一的，保证了安全性。 | 指纹之间可能存在相似性；且手指若有丝毫破损或在干湿环境里、沾有异物则指纹识别功能会失效。 |      门禁、考勤系统、笔记本电脑、手机、汽车、银行支付。      |
   | 人脸识别 | 方便高效，在实际应用场景中，人脸识别可以同时进行多个人脸的分拣、判断以及识别。相对于其他生物识别技术而言，人脸识别是非接触的，用户不需要和设备直接接触。 | 由于人脸脸部存在相似性，不同个体的区别不大，所有人脸的结构都相似。再加上现代妆容技术的发展，人脸识别存在识别难度。人脸的外形其实并不稳定，可以通过脸部变化产生很多表情，而在不同的观察角度，人脸的视觉图像差别也较大。此外，人脸识别还受光照条件等多种因素的影响。 |      人流密集区域监控、医院挂号、门禁应用、支付、闸机。      |
   | 虹膜识别 | 相对于其他生物识别技术而言，虹膜识别误识率和拒真率已经达到了零几率的识别水平，而虹膜识别又属于非接触式的识别，识别方便高效。虹膜是每个人特有的，具有不可复制的特性，安全等级来说是目前较高的。 | 但是虹膜识别的应用价格也因其技术难度成正比，相比其他的识别技术，略显贵态。 |             出入境、电子登机牌、儿童走失、边检。             |
   | 声纹识别 | 适合远程身份确认，只需要一个麦克风或电话、手机就可以通过网路实现远程登录。 | 声纹识别对环境的要求非常高，在嘈杂的环境、混合说话下声纹不易获取；人的声音也会随着年龄、身体状况、年龄、情绪等的影响而变化；不同的麦克风和信道对识别性能有影响等。 | 金融领域的电话客服身份核验、远程面签身份核验、金融防欺诈等场景。 |

   


2. “找回口令功能”和“忘记密码”在访问授权机制中的意义？请尝试设计几种安全的“找回口令功能”，详细描述找回口令的用户具体操作过程。
   - 使被授权用户在忘记口令、密码时能重新获取授权
   - **安全的“找口令功能”**
     - 1、用户忘记密码，需要找回密码
     - 2、后台通过一系列的加密处理，将通过后台邮件将重置密码的页面发送到该用户的邮箱，确认用户身份
     - 3、用户通过邮箱里的链接认证身份，然后重置密码。


3. 绘制用户使用用户名/口令+图片验证码方式录系统的流程图。考虑认证成功和失败两种场景，考虑授权成功和失败两种场景。

   ![流程图](C:\Users\黄清晓\Desktop\流程图.png)


4. Windows XP / 7 中的访问控制策略有哪些？访问控制机制有哪些？

   自主访问控制 (Discretionary Access Control, DAC)

   - 访问令牌 (access token)
   - 安全描述符 (security descriptors)
     - 安全标识 (security identifiers, SID)
     - 访问控制列表 (access control list, ACL)
       - 自主访问控制列表(discretionary access control list, DACL)
         - 访问控制项(access control entries, ACE)
       - 系统访问控制列表(system access control list, SACL)


5. 用权限三角形模型来理解并描述下 2 种威胁模型：提权、仿冒。
   - 提权：提权就是通过各种办法和漏洞，提高自己在服务器中的权限，以便控制全局		
     - 水平权限提升：指相同权限下不同的用户可以互相访问
     - 纵向权限提升：指使用权限低的用户可以访问到权限较高的用户
     - eg：一个论坛网站有两个普通用户A和B，还有一个管理员C，A获得了删除B帖子的权限就是水平越权；A获得了删除C帖子的权限就是垂直越权
   - 仿冒：A以B的身份进行认证，拥有B的权利,角色进行了变更，权利发生了变化


6. 试通过操作系统的访问控制机制来达到预防一种真实病毒的运行目的。

- 可以通过修改组策略防止蠕虫病毒，例如[熊猫烧香](https://zh.wikipedia.org/wiki/熊猫烧香)

  - 利用**自动播放**功能
  - 添加注册表自启动
  - 定时关闭特定程序，如杀毒软件、防火墙
  - 删除文件等

  也就是说，如果能根据先验知识限制系统服务的运行、限制文件的操作等，就能有针对性地预防某一病毒。


7. 什么是 OAuth？

   - OAuth 是用于授权用户的技术标准，它有助于使 SSO 成为可能。它是一种协议，用于在不共享实际用户凭据（例如用户名和密码）的前提下将授权从一项服务传递到另一项服务。使用 OAuth 时，用户可以在一个平台上登录，获得授权后，也可在另一平台上执行操作和查看数据。OAuth协议为用户资源的授权提供了一个安全的、开放而又简易的标准。与以往的授权方式不同之处是OAuth的授权不会使第三方触及到用户的帐号信息（如用户名与密码），即第三方无需使用用户的用户名与密码就可以申请获得该用户资源的授权，因此OAuth是“安全的”。同时，任何第三方都可以使用OAuth认证服务，任何服务提供商都可以实现自身的OAuth认证服务，因而OAuth是“开放的”。



8. 什么是 OpenID？

   - OpenID 是一个以用户为中心的数字身份识别框架，它具有开放、分散、自由等特性。它是去中心化的网上身份认证系统。对于支持OpenID的网站，用户不需要记住像用户名和密码这样的传统验证标记。OpenID 系统的第一部分是身份验证， 即如何通过 URI 来认证用户身份。 目前的网站都是依靠用户名和密码来登录认证，这就意味着大家在每个网站都需要注册用户名和密码， 即便你使用的是同样的密码。如果使用 OpenID ， 你的网站地址（URI）就是你的用户名， 而你的密码安全的存储在一个 OpenID 服务网站上 （你可以自己建立一个 OpenID 服务网站，也可以选择一个可信任的 OpenID 服务网站来完成注册）。



9. 试用本章所学理论分析 0Auth 和 OpenID 的区别与联系。

   - **OAuth**意在授权，即授权意味决定一个身份确定的用户能够访问那些资源；OAuth允许用户以同一个账户在多个网站登陆，授予第三方应用访问受保护的信息的权限。
   - **OpenID**意在认证，即证实某个用户是他所声明的那个人;OpenID允许被授权方访问授权方的用户数据。
   - 二者是**互补的**。



10. 如何使用 OAuth 和 OpenID 相关技术实现单点登录（Single Sign On）？
    - 单点登录将用户的身份标识信息简化为OpenId存放于客户端，当用户登录某个子系统时，将OpenID传送到服务端，服务端根据OpenID构造用户验证信息，多用于C/S与B/S相结合的系统，流程如下：
      - 当用户第一次登录时，将用户名密码发送给验证服务；
      - 验证服务将用户标识OpenId返回到客户端；
      - 客户端进行存储；
      - 访问子系统时，将OpenId发送到子系统；
      - 子系统将OpenId转发到验证服务；
      - 验证服务将用户认证信息返回给子系统；
      - 子系统构建用户验证信息后将授权后的内容返回给客户端。
    - OAuth认证是为了做到第三方应用在未获取到用户敏感信息（如：账号密码、用户PIN等）的情况下，能让用户授权予他来访问开放平台中的资源接口，其流程主要是：
      - 用户首先要保持登录，即已认证通过的状态
      - 第三方应用请求用户授权（我理解是弹出一个显示的操作界面让用户确认给第三方授权）
      - 用户授权成功之后会向`Authorization Server`（认证服务器）请求“授权码”（指`authorization_code`而不是最终的`access_token`），请求中还会携带`redirect_uri`（跳转至第三方应用的链接）
      - 获得“授权码”之后用户所在的浏览器网页将跳转到`redirect_uri`（即第三方应用）
      - 第三方应用携带“授权码”和应用认证信息（`client_id` & `client_secret`）到`Authorization Server`换取`access_token`
      - 第三方应用就可以在访问开放平台时带上`access_token`



## 参考文献

1. [访问控制安全机制及相关模型](https://blog.csdn.net/ajian005/article/details/8490082/)
2. [单点登录三个方法及原理](https://blog.csdn.net/han2529386161/article/details/52267366)
3. [认证与授权——单点登录协议盘点：OpenID vs OAuth2 vs SAML](https://blog.csdn.net/DINGYANG0315/article/details/82976935)
4. [第二章 系统安全、风险评估理论与应用](https://c4pr1c3.gitee.io/cuc-ns/chap0x02/main.html)
5. [2021-ns-public-xie-yi-nong](https://github.com/CUCCS/2021-ns-public-xie-yi-nong/blob/chap0x02/chap0x02/chap0x02.md#%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83)
6. [2021-ns-public-Lu-tong-hub](https://github.com/CUCCS/2021-ns-public-Lu-tong-hub/tree/chap0x02/chap0x02)

